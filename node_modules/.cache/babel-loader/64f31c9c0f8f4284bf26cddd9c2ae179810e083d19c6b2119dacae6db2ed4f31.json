{"ast":null,"code":"import _regeneratorRuntime from\"/usr/share/caddy/firebase/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/usr/share/caddy/firebase/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/usr/share/caddy/firebase/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/usr/share/caddy/firebase/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{getDocs,collection,deleteDoc,doc}from\"firebase/firestore\";import{auth,db}from\"../firebase-config\";import styles from'./styles.module.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function Home(_ref){var isAuth=_ref.isAuth;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postLists=_useState2[0],setPostList=_useState2[1];var postsCollectionRef=collection(db,\"posts\");var getPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getDocs(postsCollectionRef);case 3:data=_context.sent;setPostList(data.docs.map(function(post){return _objectSpread(_objectSpread({},post.data()),{},{id:post.id});}));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getPosts(){return _ref2.apply(this,arguments);};}();var deletePost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var postDoc;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:postDoc=doc(db,\"posts\",id);_context2.next=3;return deleteDoc(postDoc);case 3:getPosts();case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function deletePost(_x){return _ref3.apply(this,arguments);};}();useEffect(function(){console.log(\"Effect called\");getPosts();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"homePage\",children:postLists.map(function(post){return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"postHeader\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[\" \",post.title]})}),/*#__PURE__*/_jsx(\"div\",{className:\"deletePost\",children:isAuth&&post.author.id===auth.currentUser.uid&&/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){deletePost(post.id);},children:[\" \",\"\\uD83D\\uDDD1\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"postTextContainer\",children:[\" \",post.postText,\" \"]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"-- \",post.author.name]})]});})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.home,children:[\"~\",/*#__PURE__*/_jsx(\"br\",{}),\"\\\"Here For All Your Four-Legged Friend's Needs\\\"\",/*#__PURE__*/_jsx(\"br\",{}),\"~\"]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.footer,children:[\"Utilized with \",/*#__PURE__*/_jsx(\"em\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://github.com/tuftsm/pets.git\",target:\"_blank\",children:\"Github Repo\"})}),\"\\u2003\\u2003\\u2003 All non-Matthew images licensed for use with \",/*#__PURE__*/_jsx(\"em\",{children:\"Creative Commons\"}),\" licensing. The creator of this website does not claim to own any non-Matthew images.\",/*#__PURE__*/_jsx(\"br\",{})]})]});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","getDocs","collection","deleteDoc","doc","auth","db","styles","Home","isAuth","postLists","setPostList","postsCollectionRef","getPosts","data","docs","map","post","id","console","log","deletePost","postDoc","title","author","currentUser","uid","postText","name","home","footer"],"sources":["/usr/share/caddy/firebase/src/pages/Reviews.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { getDocs, collection, deleteDoc, doc } from \"firebase/firestore\";\nimport { auth, db } from \"../firebase-config\";\nimport styles from './styles.module.css';\n\nfunction Home({ isAuth }) {\n  const [postLists, setPostList] = useState([]);\n  const postsCollectionRef = collection(db, \"posts\");\n\n  const getPosts = async () => {\n    try {\n      const data = await getDocs(postsCollectionRef);\n      setPostList(\n        data.docs.map((post) => ({\n          ...post.data(),\n          id: post.id,\n        }))\n      );\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const deletePost = async (id) => {\n    const postDoc = doc(db, \"posts\", id);\n    await deleteDoc(postDoc);\n    getPosts();\n  };\n\n  useEffect(() => {\n    console.log(\"Effect called\");\n    getPosts();\n  }, []);\n  \n  return (\n    <div>\n    <div className=\"homePage\">\n      {postLists.map((post) => {\n        return (\n          <div className=\"post\">\n            <div className=\"postHeader\">\n              <div className=\"title\">\n                <h1> {post.title}</h1>\n              </div>\n              <div className=\"deletePost\">\n                {isAuth && post.author.id === auth.currentUser.uid && (\n                  <button\n                    onClick={() => {\n                      deletePost(post.id);\n                    }}\n                  >\n                    {\" \"}\n                    &#128465;\n                  </button>\n                )}\n              </div>\n            </div>\n            <div className=\"postTextContainer\"> {post.postText} </div>\n            <h3>-- {post.author.name}</h3>\n          </div>\n        );\n      })}\n    </div>\n                <div className={styles.home}>\n                    ~<br/>\"Here For All Your Four-Legged Friend's Needs\"<br/>~\n                </div>  \n                <div className={styles.footer}>\n                    Utilized with <em><a href=\"https://github.com/tuftsm/pets.git\" target=\"_blank\">Github Repo</a></em>&emsp;&emsp;&emsp;\n                    All non-Matthew images licensed for use with <em>Creative Commons</em> licensing. The creator of this website does not claim to own any non-Matthew images.<br/>\n                </div>   \n                </div>\n  );\n}\n\nexport default Home;"],"mappings":"2cAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,OAAO,CAAEC,UAAU,CAAEC,SAAS,CAAEC,GAAG,KAAQ,oBAAoB,CACxE,OAASC,IAAI,CAAEC,EAAE,KAAQ,oBAAoB,CAC7C,MAAOC,OAAM,KAAM,qBAAqB,CAAC,wFAEzC,QAASC,KAAI,MAAa,IAAVC,OAAM,MAANA,MAAM,CACpB,cAAiCT,QAAQ,CAAC,EAAE,CAAC,wCAAtCU,SAAS,eAAEC,WAAW,eAC7B,GAAMC,mBAAkB,CAAGV,UAAU,CAACI,EAAE,CAAE,OAAO,CAAC,CAElD,GAAMO,SAAQ,6FAAG,oLAEMZ,QAAO,CAACW,kBAAkB,CAAC,QAAxCE,IAAI,eACVH,WAAW,CACTG,IAAI,CAACC,IAAI,CAACC,GAAG,CAAC,SAACC,IAAI,wCACdA,IAAI,CAACH,IAAI,EAAE,MACdI,EAAE,CAAED,IAAI,CAACC,EAAE,IACX,CAAC,CACJ,CAAC,+EAEFC,OAAO,CAACC,GAAG,aAAK,CAAC,oEAEpB,kBAZKP,SAAQ,2CAYb,CAED,GAAMQ,WAAU,6FAAG,kBAAOH,EAAE,oIACpBI,OAAO,CAAGlB,GAAG,CAACE,EAAE,CAAE,OAAO,CAAEY,EAAE,CAAC,wBAC9Bf,UAAS,CAACmB,OAAO,CAAC,QACxBT,QAAQ,EAAE,CAAC,wDACZ,kBAJKQ,WAAU,6CAIf,CAEDtB,SAAS,CAAC,UAAM,CACdoB,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAC5BP,QAAQ,EAAE,CACZ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,oCACA,YAAK,SAAS,CAAC,UAAU,UACtBH,SAAS,CAACM,GAAG,CAAC,SAACC,IAAI,CAAK,CACvB,mBACE,aAAK,SAAS,CAAC,MAAM,wBACnB,aAAK,SAAS,CAAC,YAAY,wBACzB,YAAK,SAAS,CAAC,OAAO,uBACpB,0BAAMA,IAAI,CAACM,KAAK,GAAM,EAClB,cACN,YAAK,SAAS,CAAC,YAAY,UACxBd,MAAM,EAAIQ,IAAI,CAACO,MAAM,CAACN,EAAE,GAAKb,IAAI,CAACoB,WAAW,CAACC,GAAG,eAChD,gBACE,OAAO,CAAE,kBAAM,CACbL,UAAU,CAACJ,IAAI,CAACC,EAAE,CAAC,CACrB,CAAE,WAED,GAAG,kBAGP,EACG,GACF,cACN,aAAK,SAAS,CAAC,mBAAmB,eAAGD,IAAI,CAACU,QAAQ,OAAQ,cAC1D,4BAAQV,IAAI,CAACO,MAAM,CAACI,IAAI,GAAM,GAC1B,CAEV,CAAC,CAAC,EACE,cACM,aAAK,SAAS,CAAErB,MAAM,CAACsB,IAAK,4BACvB,aAAK,iEAA8C,aAAK,OACvD,cACN,aAAK,SAAS,CAAEtB,MAAM,CAACuB,MAAO,yCACZ,iCAAI,UAAG,IAAI,CAAC,oCAAoC,CAAC,MAAM,CAAC,QAAQ,yBAAgB,EAAK,iFACtD,wCAAyB,sGAAqF,aAAK,GAC9J,GACA,CAEtB,CAEA,cAAetB,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}